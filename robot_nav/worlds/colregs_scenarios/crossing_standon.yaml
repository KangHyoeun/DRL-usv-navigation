# COLREGs Scenario: Crossing - Stand-On Vessel (Rule 15 & 17)
# ==============================================================
# 
# 횡단 상황 (OS가 stand-on vessel):
# - Own Ship (OS): 서쪽에서 동쪽으로 진행 (heading 0°)
# - Target Ship (TS): OS의 좌현 측에서 접근 (heading 90°, 북향)
# - OS는 침로와 속력을 유지해야 함
# 
# COLREGs Rule 15 & 17: OS가 stand-on vessel
# - TS가 OS의 좌현(port)에 있음
# - OS는 침로와 속력 유지
# - TS가 적절한 조치를 하지 않으면 Rule 17(a)(ii)에 따라 자체 회피 가능

world:
  height: 200  # North-South extent (meters)
  width: 200   # East-West extent (meters)
  step_time: 0.1  # 10Hz

robot:
  - kinematics: diffdrive  # Otter USV
    id: 0
    state: [-80, 0, 0.0]     # [x, y, heading(rad)] - 서쪽, 동향 (0°)
    goal: [80, 0, 0.0]       # 동쪽 목표
    vel_min: [0.0, -1.0]     # [u_min, r_min]
    vel_max: [4.0, 1.0]      # [u_max, r_max]
    footprint:
      type: polygon
      points: [[-1.2, -0.6], [1.2, -0.6], [1.2, 0.6], [-1.2, 0.6]]  # Otter size
    
    color: [0, 0, 255]  # Blue
    plot_color: b
    radius: 4.0  # Arrival threshold
    
    sensor:
      - type: 2DLidar
        range: 70
        fov: 180  # degrees
        num_beams: 180
        noise:
          distance: 0.08
          angle: 0.1

obstacle:
  # Target Ship - Crossing from port (left side)
  - kinematics: omni
    id: 1
    state: [20, -80, 1.5708]  # [x, y, heading(rad)] - OS 좌현에서 북향 접근 (90°)
    vel_min: [-4, -4]
    vel_max: [4, 4]
    footprint:
      type: polygon
      points: [[-1.5, -0.8], [1.5, -0.8], [1.5, 0.8], [-1.5, 0.8]]  # Target ship size
    
    color: [255, 0, 0]  # Red
    control_mode: reactive
    reactive_rule:
      type: velocity
      vel: [0, 3.0, 0]  # Constant velocity north at 3 m/s
    
    arrival_mode: false

  # Boundary walls
  - kinematics: static
    id: 100
    type: polytope
    vertices: [[100, -100], [100, 100], [102, 100], [102, -100]]
    color: [128, 128, 128]
  
  - kinematics: static
    id: 101
    type: polytope
    vertices: [[-100, -100], [-100, 100], [-102, 100], [-102, -100]]
    color: [128, 128, 128]
  
  - kinematics: static
    id: 102
    type: polytope
    vertices: [[-100, 100], [100, 100], [100, 102], [-100, 102]]
    color: [128, 128, 128]
  
  - kinematics: static
    id: 103
    type: polytope
    vertices: [[-100, -100], [100, -100], [100, -102], [-100, -102]]
    color: [128, 128, 128]
