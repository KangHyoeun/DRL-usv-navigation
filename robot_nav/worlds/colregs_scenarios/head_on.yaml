# COLREGs Scenario: Head-On Situation (Rule 14)
# ================================================
# 
# 정면 조우 상황:
# - Own Ship (OS): 남쪽에서 북쪽으로 진행 (heading 90°)
# - Target Ship (TS): 북쪽에서 남쪽으로 진행 (heading 270°)
# - 충돌 코스: 두 선박이 정면으로 마주침
# 
# COLREGs Rule 14: 양 선박 모두 우현으로 변침하여 서로의 좌현을 지나가야 함

world:
  height: 200  # North-South extent (meters)
  width: 100   # East-West extent (meters)
  step_time: 0.1  # 10Hz

robot:
  - kinematics: diffdrive  # Otter USV
    id: 0
    state: [0, -80, 1.5708]  # [x, y, heading(rad)] - 남쪽, 북향 (90°)
    goal: [0, 80, 1.5708]    # 북쪽 목표
    vel_min: [0.0, -1.0]     # [u_min, r_min]
    vel_max: [4.0, 1.0]      # [u_max, r_max]
    footprint:
      type: polygon
      points: [[-1.2, -0.6], [1.2, -0.6], [1.2, 0.6], [-1.2, 0.6]]  # Otter size
    
    color: [0, 0, 255]  # Blue
    plot_color: b
    radius: 4.0  # Arrival threshold
    
    sensor:
      - type: 2DLidar
        range: 70
        fov: 180  # degrees
        num_beams: 180
        noise:
          distance: 0.08
          angle: 0.1

obstacle:
  # Target Ship - Head-on approach
  - kinematics: omni
    id: 1
    state: [0, 80, 4.7124]  # [x, y, heading(rad)] - 북쪽, 남향 (270°)
    vel_min: [-4, -4]
    vel_max: [4, 4]
    footprint:
      type: polygon
      points: [[-1.5, -0.8], [1.5, -0.8], [1.5, 0.8], [-1.5, 0.8]]  # Target ship size
    
    color: [255, 0, 0]  # Red
    control_mode: reactive
    reactive_rule:
      type: velocity
      vel: [0, -3.0, 0]  # Constant velocity south at 3 m/s
    
    arrival_mode: false

  # Boundary walls
  - kinematics: static
    id: 100
    type: polytope
    vertices: [[50, -100], [50, 100], [52, 100], [52, -100]]
    color: [128, 128, 128]
  
  - kinematics: static
    id: 101
    type: polytope
    vertices: [[-50, -100], [-50, 100], [-52, 100], [-52, -100]]
    color: [128, 128, 128]
  
  - kinematics: static
    id: 102
    type: polytope
    vertices: [[-100, 100], [100, 100], [100, 102], [-100, 102]]
    color: [128, 128, 128]
  
  - kinematics: static
    id: 103
    type: polytope
    vertices: [[-100, -100], [100, -100], [100, -102], [-100, -102]]
    color: [128, 128, 128]
